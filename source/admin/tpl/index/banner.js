app.controller("bannerCtrl",["$rootScope","$scope","_jiyin","dataToURL",function(t,a,e,n){a.is_admin=t.is_admin,a.bannerList={},a.inputPage=1,a.keyword="",a.getData=function(){e.dataPost("admin/banner_admin/get_page_info",n({page:a.inputPage,page_size:10,keyword:a.keyword})).then(function(t){a.bannerList=t.data,a.totalPage=t.total_page})},a.getData(),a.addBannerList=function(){a.title="增加数据",e.modal({tempUrl:"/source/admin/tpl/modal/modal-banner.html",tempCtrl:"modalBannerCtrl",ok:a.addList,size:"lg",params:{title:a.title,infoList:{},ael:"add"}})},a.addList=function(t){e.dataPost("admin/banner_admin/add",n(t)).then(function(t){1==t.success?(e.msg("s",t.msg),a.getData()):e.msg("e",t.msg)})},a.search=function(){e.dataPost("admin/banner_admin/get_page_info",n({page:a.inputPage,page_size:10,keyword:a.keyword})).then(function(t){a.bannerList=t.data,a.totalPage=t.total_page})},$("#filter").keydown(function(t){13==t.keyCode&&a.search()}),a.editBannerList=function(t){a.title="编辑数据",e.modal({tempUrl:"/source/admin/tpl/modal/modal-banner.html",tempCtrl:"modalBannerCtrl",ok:a.editList,size:"lg",params:{title:a.title,infoList:t,ael:"edit"}})},a.editList=function(t){e.dataPost("admin/banner_admin/update",n(t)).then(function(t){1==t.success?(e.msg("s",t.msg),a.getData()):e.msg("e",t.msg)})},a.deleteData=function(t){confirm("确认删除这条数据吗?")&&e.dataPost("admin/banner_admin/delete",n({id:t.id})).then(function(){e.msg("s","删除成功"),a.getData()})},a.nextPage=function(){a.inputPage<a.totalPage?(a.inputPage++,a.getData()):e.msg("e","当前是最后一页")},a.previousPage=function(){a.inputPage>1?(a.inputPage--,a.getData()):e.msg("e","当前是第一页")},a.firstPage=function(){a.inputPage=1,a.getData()},a.lastPage=function(){a.inputPage=a.totalPage,a.getData()},a.selectPage=function(t){a.inputPage=t,a.getData()}}]);