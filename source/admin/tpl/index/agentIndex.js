app.controller("agentCommodityCtrl",["$scope","_jiyin","dataToURL",function(t,a,e){t.bannerList={},t.inputPage=1,t.keyword="",t.name="",t.getData=function(){a.dataPost("admin/agent_admin/get_agent_commodity_page?page="+t.inputPage+"&page_size=10",e({keyword:t.keyword,name:t.name})).then(function(e){e.success?t.bannerList=e.data:(a.msg("e",e.msg),t.bannerList=[]),t.totalPage=e.total_page,t.role_id=e.role_id})},t.getData(),t.search=function(){t.inputPage=1,t.getData()},$("#filter").keydown(function(a){13==a.keyCode&&t.getData()}),t.getAgent=function(){t.title="添加代理商",a.modal({tempUrl:"/source/admin/tpl/modal/modal-agentAddCommodity.html",tempCtrl:"agentAddCommodityCtrl",ok:t.addAgent,size:"lg",params:{title:t.title,ael:"add"}})},t.addAgent=function(a){t.inputPage=1,t.agentName=a.name,t.infoList.agent_id=a.id,t.name=t.agentName,t.getData()},t.addList=function(){t.title="添加代理商商品",a.modal({tempUrl:"/source/admin/tpl/modal/modal-agentIndex.html",tempCtrl:"modalAgentCommodityCtrl",ok:t.add,size:"lg",params:{title:t.title,infoList:{},ael:"add"}})},t.add=function(n){a.dataPost("admin/agent_admin/add_agent_commodity",e({commodity_category:JSON.stringify(n)})).then(function(e){1==e.success?(t.getData(),a.msg("s",e.msg)):a.msg("e",e.msg)})},t.editBannerList=function(e){t.title="编辑代理商商品",a.modal({tempUrl:"/source/admin/tpl/modal/modal-agentCommodity.html",tempCtrl:"modalAgentCtrl",ok:t.editList,size:"lg",params:{title:t.title,infoList:e,ael:"edit"}})},t.editList=function(n){a.dataPost("admin/agent_admin/update_agent_commodity",e(n)).then(function(e){1==e.success?(a.msg("s",e.msg),t.getData()):a.msg("e",e.msg)})},t.deleteData=function(n){confirm("确认删除这条数据吗?")&&a.dataPost("admin/agent_admin/delete_agent_commodity",e({id:n.id})).then(function(e){e.success?(a.msg("s",e.msg),t.getData()):a.msg("e",e.msg)})},t.nextPage=function(){t.inputPage<t.totalPage?(t.inputPage++,t.getData()):a.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.inputPage--,t.getData()):a.msg("e","当前是第一页")},t.firstPage=function(){t.inputPage=1,t.getData()},t.lastPage=function(){t.inputPage=t.totalPage,t.getData()},t.selectPage=function(a){t.inputPage=a,t.getData()}}]);