"use strict";app.controller("modalRecomCtrl",["$scope","$modalInstance","_jiyin","params","FileUploader","dataToURL",function(i,t,o,e,m,n){if(i.infoList=e.infoList,i.title=e.title,i.ael=e.ael,i.is_point=e.isPoint,"edit"==i.ael){if(null!=i.infoList.commodity_center_name)var d=i.infoList.commodity_center_name;else var d=i.infoList.commodity_specification_name;i.infoList.commodity_name=i.infoList.commodity_name+" "+d+" "+i.infoList.package_type_name}"add"==i.ael&&(i.infoList.type_id=0==i.is_point?"1":"2"),i.getType=function(){o.dataPost("admin/system_code_admin/get_by_type/recommend_commodity_type").then(function(t){i.typeList=t})},i.getType(),i.getCommo=function(){i.is_point===!0?o.dataPost("admin/commodity_admin/get_all_commodity_by_is_point",n({is_point:1})).then(function(t){i.commoList=t.data}):o.dataPost("admin/commodity_admin/get_all_commodity_by_is_point",n({is_point:0})).then(function(t){i.commoList=t.data})},i.getCommo(),i.selectCommodity=function(){o.modal({tempUrl:"/source/admin/tpl/modal/modal-agentAddCommodity.html",tempCtrl:"agentAddCommodityCtrl",ok:i.add,size:"lg",params:{title:i.title,infoList:i.discount,roleList:i.roleList,is_point:i.is_point,ael:"add",select:"s"}})},i.add=function(t){if(null!=t[0].commodity_center_name)var o=t[0].commodity_center_name;else var o=t[0].commodity_specification_name;i.infoList.price=t[0].price,i.infoList.commodity_name=t[0].commodity_name+" "+o+" "+t[0].package_type_name,i.infoList.commodity_id=t[0].commodity_id,i.infoList.commodity_specification_id=t[0].id},i.cancel=function(){t.dismiss("cancel")},i.ok=function(){return i.infoList.commodity_id?i.infoList.type_id?i.infoList.start_time?i.infoList.end_time?void t.close(i.infoList):void o.msg("e","生效结束时间不能为空"):void o.msg("e","生效起始时间不能为空"):void o.msg("e","商品类型不能为空"):void o.msg("e","商品名称不能为空")}}]);