app.controller("commodityCategoryCtrl",["$scope","$modalInstance","_jiyin","dataToURL","$stateParams","$state","params",function(e,t,a,c,i,s,n){e.commonclassList={},e.list=[],e.commodity_details=angular.copy(n.infoList),e.inputPage=1,e.open=!1,e.ael=angular.copy(n.ael),e.selectFlag=angular.copy(n.select),e.agent_id=angular.copy(n.agent_id),e.keywords="",e.getData=function(){var t=0;a.dataPost("admin/agent_admin/agent_paginate_by_id/"+e.inputPage+"/10",c({agent_id:e.agent_id,keywords:e.keywords})).then(function(c){c.success?(angular.forEach(c.data,function(a){e.ids.indexOf(a.id)>=0&&(a.checked=!0,t++)}),t==c.data.length?$(".select-all").prop("checked",!0):$(".select-all").prop("checked",!1),e.commonclassList=c.data):(e.commonclassList=[],a.msg("e",c.msg),$(".select-all").prop("checked",!1)),e.total_num=c.total_num,e.totalPage=c.total_page})},e.getData(),e.search=function(){e.getData()},$("#search").keydown(function(t){13==t.keyCode&&e.getData()}),e.ids=[],e.selectAll=function(t){if($(t.target)[0].checked)angular.forEach(e.commonclassList,function(t){e.ids.indexOf(t.id)<0&&(e.ids.push(t.id),e.list.push(t))}),$(".single-check1").prop("checked",!0);else{for(var a=0;a<e.commonclassList.length;a++){var c=e.ids.indexOf(e.commonclassList[a].id);c>=0&&(e.ids.splice(c,1),e.list.splice(c,1))}$(".single-check1").prop("checked",!1)}},e.selectSingle=function(t,a){if($(t.target)[0].checked&&-1==e.ids.indexOf(a.id))e.ids.push(a.id),e.list.push(a),e.ids.length==e.commonclassList.length&&$(".select-all").prop("checked",!0);else{for(var c=0;c<e.ids.length;c++)e.ids[c]==a.id&&(e.ids.splice(c,1),e.list.splice(c,1),c--);$(".select-all").prop("checked",!1)}},e.cancel=function(){t.dismiss("cancel")},e.nextPage=function(){e.inputPage<e.totalPage?(e.inputPage++,e.getData()):a.msg("e","当前是最后一页")},e.previousPage=function(){e.inputPage>1?(e.inputPage--,e.getData()):a.msg("e","当前是第一页")},e.firstPage=function(){e.inputPage=1,e.getData()},e.lastPage=function(){e.inputPage=e.totalPage,e.getData()},e.selectPage=function(t){e.inputPage=t,e.getData()},e.batch_add=function(){t.close(e.list)}}]);