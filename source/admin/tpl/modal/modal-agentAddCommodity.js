app.controller("agentAddCommodityCtrl",["$scope","$modalInstance","_jiyin","dataToURL","$stateParams","$state","params",function(t,e,a,i,l,s,n){t.commonclassList={},t.list=[],t.commodity_details=angular.copy(n.infoList),t.inputPage=1,t.is_point=n.is_point?1:0,t.open=!1,t.ael=angular.copy(n.ael),t.selectFlag=angular.copy(n.select),t.title=angular.copy(n.title),t.search_words=[],t.search_words.keywords="",t.getData=function(){var e=0;a.dataPost("admin/commodity_admin/agent_paginate/"+t.inputPage+"/10",i({is_point:t.is_point,keywords:t.search_words.keywords})).then(function(i){i.success?(angular.forEach(i.data,function(a){t.ids.indexOf(a.id)>=0&&(a.checked=!0,e++)}),e==i.data.length?$(".select-all").prop("checked",!0):$(".select-all").prop("checked",!1),t.commonclassList=i.data):(t.commonclassList=[],a.msg("e",i.msg),$(".select-all").prop("checked",!1)),t.total_num=i.total_num,t.totalPage=i.total_page})},t.getAllAgent=function(){a.dataPost("admin/agent_admin/get_all_agent",i({page:t.inputPage,page_size:"10",keywords:t.search_words.keywords})).then(function(e){t.agentList=e.success?e.data:[],t.total_num=e.total_num,t.totalPage=e.total_page})},"添加代理商"==t.title?t.getAllAgent():t.getData(),t.search=function(){$(".select-all").prop("checked",!1),"添加代理商"==t.title?t.getAllAgent():t.getData()},t.ids=[],t.selectAll=function(e){if($(e.target)[0].checked)angular.forEach(t.commonclassList,function(e){t.ids.indexOf(e.id)<0&&(t.ids.push(e.id),t.list.push(e))}),$(".single-check1").prop("checked",!0);else{for(var a=0;a<t.commonclassList.length;a++){var i=t.ids.indexOf(t.commonclassList[a].id);i>=0&&(t.ids.splice(i,1),t.list.splice(i,1))}$(".single-check1").prop("checked",!1)}},t.selectSingle=function(e,a){if($(e.target)[0].checked&&-1==t.ids.indexOf(a.id))t.ids.push(a.id),t.list.push(a),t.ids.length==t.commonclassList.length&&$(".select-all").prop("checked",!0);else{for(var i=0;i<t.ids.length;i++)t.ids[i]==a.id&&(t.ids.splice(i,1),t.list.splice(i,1),i--);$(".select-all").prop("checked",!1)}},t.selectSingleRadio=function(e,a){t.list=angular.copy(a)},t.cancel=function(){e.dismiss("cancel")},t.nextPage=function(){t.inputPage<t.totalPage?(t.inputPage++,"添加代理商"==t.title?t.getAllAgent():t.getData()):a.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.inputPage--,"添加代理商"==t.title?t.getAllAgent():t.getData()):a.msg("e","当前是第一页")},t.firstPage=function(){t.inputPage=1,"添加代理商"==t.title?t.getAllAgent():t.getData()},t.lastPage=function(){t.inputPage=t.totalPage,"添加代理商"==t.title?t.getAllAgent():t.getData()},t.selectPage=function(e){t.inputPage=e,"添加代理商"==t.title?t.getAllAgent():t.getData()},t.batch_add=function(){e.close(t.list)}}]);