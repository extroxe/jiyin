app.controller("packagesCtrl",["$rootScope","$scope","_jiyin","dataToURL","$stateParams","$state","$filter",function(t,e,a,n,i,g){e.is_admin=t.is_admin,e.inputPage=1,e.keyword="",e.register_start_time="",e.register_end_time="",e.name="",e.getData=function(){a.dataPost("admin/Agent_admin/get_all_category_for_agent",n({page:e.inputPage,page_size:10,keyword:e.keyword,start_time:e.register_start_time,end_time:e.register_end_time,name:e.name})).then(function(t){t.success?(e.packagesList=t.data,e.role_id=t.role_id):(e.packagesList=[],a.msg("e",t.msg)),e.total_num=t.total,e.totalPage=t.total_page})},e.getData(),e.getAgent=function(){e.title="添加代理商",a.modal({tempUrl:"/source/admin/tpl/modal/modal-agentAddCommodity.html",tempCtrl:"agentAddCommodityCtrl",ok:e.addAgent,size:"lg",params:{title:e.title,ael:"add"}})},e.addAgent=function(t){e.inputPage=1,e.agentName=t.name,e.infoList.agent_id=t.id,e.name=e.agentName,e.getData()},e.search=function(){e.inputPage=1,e.getData()},e.deleteData=function(t){confirm("确认删除这条数据吗?")&&a.dataPost("admin/Agent_admin/delete_agent_index",n({id:t})).then(function(t){t.success?(a.msg("s",t.msg),e.getData()):a.msg("e",t.msg)})},e.add=function(){g.go("app.editCommodityCategory",{operate:"add"})},e.view_detail=function(t){g.go("app.editCommodityCategory",{operate:"edit",category:t.index_name,id:t.id,agent_id:t.agent_id,color:t.color,agent_name:t.agent_name})},e.nextPage=function(){e.inputPage<e.totalPage?(e.inputPage++,e.getData()):a.msg("e","当前是最后一页")},e.previousPage=function(){e.inputPage>1?(e.inputPage--,e.getData()):a.msg("e","当前是第一页")},e.firstPage=function(){e.inputPage=1,e.getData()},e.lastPage=function(){e.inputPage=e.totalPage,e.getData()},e.selectPage=function(t){e.inputPage=t,e.getData()}}]);