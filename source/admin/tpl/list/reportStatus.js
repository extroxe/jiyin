app.directive("autoFocus",function(){return function(e,t){t[0].focus()}}),app.controller("reportStatusCtrl",["$rootScope","$scope","_jiyin","dataToURL","$stateParams","$state","$filter",function(e,t,a,c){t.is_admin=e.is_admin,t.orderList={},t.inputPage=1,t.pageSize={},t.pageSize.page="10",t.keyword="",t.list={},t.open=!1,t.check=!1,t.state=0,t.register_start_time="",t.register_end_time="",t.checkList=new Array,t.is_agent="全部",t.totalPage=1,t.status=[],t.checkNum=0,t.allCheckNum=10,t.select_all=!1,t.select_one=!1,t.checkedArray=[],t.back=function(){window.history.go(-1)},t.selectAll=function(e){if(e.checked)angular.forEach(e,function(e){t.checkedArray.indexOf(e.id)<0&&t.checkedArray.push(e.id),e.checked=!0});else{for(var a=0;a<e.length;a++)t.checkedArray.indexOf(e[a].id)>=0&&(t.checkedArray.splice(t.checkedArray.indexOf(e[a].id),1),a--);angular.forEach(e,function(e){e.checked=!1})}console.log(t.checkedArray)},t.selectSingle=function(e,a){angular.forEach(a,function(c){var n=t.checkedArray.indexOf(c.id);-1===n&&c.checked&&e.id==c.id?(t.checkedArray.push(c.id),a.count++):-1===n||c.checked||e.id!=c.id||(t.checkedArray.splice(n,1),a.count--)}),a.checked=a.length===a.count,console.log(t.checkedArray)},t.stateIsAgent=function(e){angular.forEach(t.is_agents,function(a,c){e==c&&(t.is_agent=a,t.is_agent_id=e)})},t.listcheck=function(){t.checkNum=0,angular.forEach(t.orderList,function(e){e.checked&&t.checkNum++})},t.getData=function(){a.dataPost("admin/report_admin/get_report_list_by_status/"+t.inputPage+"/"+t.pageSize.page,c({order_status:t.state})).then(function(e){if(e.success){if(t.orderList=e.data,t.orderList)for(var c=0;c<t.orderList.length;c++);t.allCheckNum=t.orderList.length,angular.forEach(t.orderList,function(e){if(e.sub_order){var a=0;angular.forEach(e.sub_order,function(e){return-1!=t.checkedArray.indexOf(e.id)?(e.checked=!0,void a++):void(e.checked=!1)}),a==e.sub_order.length&&(e.sub_order.checked=!0),e.sub_order.count=0}})}else t.orderList=[],a.msg("e",e.msg);t.totalPage=e.total_page,t.total_count=e.total_count})},t.getData(),$("#search").keydown(function(e){13==e.keyCode&&t.getData()}),t.search=function(){t.getData()},t.getStatus=function(){a.dataGet("admin/report_admin/get_all_report_status/").then(function(e){e&&(t.status=e)})},t.getStatus(),t.nextPage=function(){t.inputPage<t.totalPage?(t.check=!1,t.inputPage++,t.getData()):a.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.check=!1,t.inputPage--,t.getData()):a.msg("e","当前是第一页")},t.firstPage=function(){1==t.totalPage?a.msg("e","当前是第一页"):(t.check=!1,t.inputPage=1,t.getData())},t.lastPage=function(){1==t.totalPage?a.msg("e","当前是最后一页"):(t.check=!1,t.inputPage=t.totalPage,t.getData())},t.selectPage=function(e){1==t.totalPage?a.msg("e","当前是最后一页"):(t.check=!1,t.inputPage=e,t.getData())}}]);